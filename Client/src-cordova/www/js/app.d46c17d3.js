(function(e){function t(t){for(var n,c,i=t[0],s=t[1],l=t[2],u=0,b=[];u<i.length;u++)c=i[u],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&b.push(a[c][0]),a[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(b.length)b.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,i=1;i<o.length;i++){var s=o[i];0!==a[s]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},a={app:0},r=[];function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=s;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"065a":function(e,t,o){"use strict";o("d982")},"12e6":function(e,t,o){},"6e3c":function(e,t,o){"use strict";o("12e6")},"7e9b":function(e,t,o){"use strict";o("caa9")},"8e1f":function(e,t,o){},"9cdc":function(e,t,o){"use strict";o("c701")},c701:function(e,t,o){},c973:function(e,t,o){"use strict";o("da0b")},caa9:function(e,t,o){},cd49:function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23");function a(e,t,o,a,r,c){var i=Object(n["resolveComponent"])("router-view");return Object(n["openBlock"])(),Object(n["createBlock"])(i)}o("9cdc");const r={};r.render=a;var c=r,i=(o("b0c0"),o("8c4f")),s=o("cf05"),l=o.n(s),d=Object(n["withScopeId"])("data-v-4d60d135");Object(n["pushScopeId"])("data-v-4d60d135");var u={class:"login"},b=Object(n["createVNode"])("img",{src:l.a,alt:"",class:"logo"},null,-1),p=Object(n["createVNode"])("h1",{class:"title"},"به بورد فراوین خوش اومدی!",-1),m={class:"input-group"},f={class:"input-group"},h=Object(n["createTextVNode"])(" ورود "),O={class:"input-group"},j={class:"input-group"},g={class:"input-group"};Object(n["popScopeId"])();var v=d((function(e,t,o,a,r,c){var i=Object(n["resolveComponent"])("fw-loading"),s=Object(n["resolveDirective"])("autofocus");return Object(n["openBlock"])(),Object(n["createBlock"])("div",u,[b,p,"login"===e.mode?(Object(n["openBlock"])(),Object(n["createBlock"])("form",{key:0,class:"form",onSubmit:t[4]||(t[4]=Object(n["withModifiers"])((function(t){return e.login()}),["prevent"]))},[Object(n["createVNode"])("label",m,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"نام کاربری",name:"username",autocomplete:"username","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.username=t}),class:"input",type:"text"},null,512),[[s],[n["vModelText"],e.username]])]),Object(n["createVNode"])("label",f,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"رمز عبور",name:"password",autocomplete:"password","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),class:"input",type:"password"},null,512),[[n["vModelText"],e.password]])]),Object(n["createVNode"])("button",{class:[{"is-loading":e.loading},"submit"],disabled:e.loading},[e.loading?Object(n["createVNode"])(i,{key:0,class:"loading"}):Object(n["createCommentVNode"])("",!0),h],10,["disabled"]),Object(n["createVNode"])("button",{disabled:e.loading,type:"button",class:"submit secondary-button",onClick:t[3]||(t[3]=function(t){return e.$router.push("/register")})},"ثبت نام",8,["disabled"])],32)):(Object(n["openBlock"])(),Object(n["createBlock"])("form",{key:1,class:"form",onSubmit:t[9]||(t[9]=Object(n["withModifiers"])((function(t){return e.register()}),["prevent"]))},[Object(n["createVNode"])("label",O,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"نام کاربری",name:"username","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.username=t}),class:"input",type:"text"},null,512),[[s],[n["vModelText"],e.username]])]),Object(n["createVNode"])("label",j,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"رمز عبور",name:"password",autocomplete:"new-password","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.password=t}),class:"input",type:"password"},null,512),[[n["vModelText"],e.password]])]),Object(n["createVNode"])("label",g,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"ایمیل",name:"email",autocomplete:"email","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.email=t}),class:"input",type:"email"},null,512),[[n["vModelText"],e.email]])]),Object(n["createVNode"])("button",{disabled:e.loading,class:"submit"},"ثبت نام",8,["disabled"]),Object(n["createVNode"])("button",{disabled:e.loading,type:"button",class:"submit secondary-button",onClick:t[8]||(t[8]=function(t){return e.$router.push("/login")})},"ورود",8,["disabled"])],32))])})),k=(o("d3b7"),o("96cf"),o("1da1"));function V(e,t,o){return new Promise((function(n,a){var r=localStorage.getItem("access_token"),c=new XMLHttpRequest;c.open(e,"/api".concat(t)),c.setRequestHeader("Content-Type","application/json"),null!=r&&c.setRequestHeader("access_token",r),c.onload=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t=JSON.parse(c.responseText),n(t)}catch(o){a(o)}case 1:case"end":return e.stop()}}),e)}))),c.onerror=a,c.send(JSON.stringify(o))}))}function y(){V("POST","/v1/auth/refresh-token",{refresh_token:localStorage.getItem("refresh_token")}).then((function(e){if(console.log(e.status),"succes"===e.status)return localStorage.setItem("refresh_token",e.refresh_token),void localStorage.setItem("access_token",e.access_token);console.log("hellow")})).catch((function(e){console.error(e)}))}function N(e,t){return V("POST",e,t)}function w(e){return V("GET",e)}function B(e,t){return V("DELETE",e,t)}var _=Object(n["withScopeId"])("data-v-1adc9173");Object(n["pushScopeId"])("data-v-1adc9173");var C={class:"lds-ellipsis"},S=Object(n["createVNode"])("div",null,null,-1),I=Object(n["createVNode"])("div",null,null,-1),x=Object(n["createVNode"])("div",null,null,-1),T=Object(n["createVNode"])("div",null,null,-1);Object(n["popScopeId"])();var M=_((function(e,t,o,a,r,c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",C,[S,I,x,T])}));o("c973");const D={};D.render=M,D.__scopeId="data-v-1adc9173";var L=D,$=Object(n["defineComponent"])({name:"login",components:{FwLoading:L},data:function(){return{username:"",password:"",email:"",loading:!1,mode:""}},watch:{$route:{immediate:!0,handler:function(e){this.mode="Login"===e.name?"login":"register"}}},beforeCreate:function(){document.body.className="login"},methods:{login:function(){var e=this;this.loading=!0,N("/v1/auth/login",{username:this.username,password:this.password}).then((function(t){"succes"===t.status?(localStorage.setItem("access_token",t.access_token),localStorage.setItem("refresh_token",t.refresh_token),e.$router.push({name:"Boards"}),console.log("going next page0")):alert("لاگین نشدی!")})).finally((function(){e.loading=!1}))},register:function(){var e=this;this.loading=!0,N("/v1/auth/register",{username:this.username,password:this.password,email:this.email}).then((function(t){console.log(t.status),"success"===t.status?e.login():alert("ثبت نام نشدی!")})).finally((function(){e.loading=!1}))}}});o("065a");$.render=v,$.__scopeId="data-v-4d60d135";var A=$,U=(o("a4d3"),o("e01a"),Object(n["withScopeId"])("data-v-0500fea6"));Object(n["pushScopeId"])("data-v-0500fea6");var R={class:"header"},E=Object(n["createVNode"])("p",null,"تخته ها",-1),P=Object(n["createTextVNode"])("ایجاد بورد جدید"),q={class:"createBoard"},F={key:0,class:"validationmessage"},H={key:1,class:"boards"},z=Object(n["createVNode"])("p",null,"no boards found!",-1);Object(n["popScopeId"])();var J=U((function(e,t,o,a,r,c){var i=Object(n["resolveComponent"])("Toast"),s=Object(n["resolveComponent"])("InputText"),l=Object(n["resolveComponent"])("Textarea"),d=Object(n["resolveComponent"])("Button"),u=Object(n["resolveComponent"])("Dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",R,[E,Object(n["createVNode"])("b",{onClick:t[1]||(t[1]=function(){return e.openModal.apply(e,arguments)})},"+"),Object(n["createVNode"])(u,{header:"Header",visible:e.display,"onUpdate:visible":t[4]||(t[4]=function(t){return e.display=t}),modal:!0,dismissableMask:!0,rtl:!0,closable:!0},{header:U((function(){return[P]})),default:U((function(){return[Object(n["createVNode"])(i,{position:"bottom-right"}),Object(n["createVNode"])("div",q,[Object(n["createVNode"])(s,{type:"text",modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.name=t}),placeholder:"نام بورد"},null,8,["modelValue"]),e.missingname?(Object(n["openBlock"])(),Object(n["createBlock"])("label",F,Object(n["toDisplayString"])(e.validationmessage),1)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{modelValue:e.description,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.description=t}),autoResize:!0,rows:"5",cols:"30",placeholder:"توضیحات بورد"},null,8,["modelValue"]),Object(n["createVNode"])(d,{label:"ایجاد بورد جدید",onClick:Object(n["withModifiers"])(e.createBoard,["stop"])},null,8,["onClick"])])]})),_:1},8,["visible"])]),e.boards?(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:0,class:"boards",onClick:t[7]||(t[7]=function(){return e.openboard.apply(e,arguments)})},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.boards,(function(o,a){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"grid-container",key:o._id,id:a,onClick:t[6]||(t[6]=function(){return e.openboard.apply(e,arguments)})},[Object(n["createVNode"])("p",{class:"remove",onClick:t[5]||(t[5]=Object(n["withModifiers"])((function(){return e.deleteboard.apply(e,arguments)}),["stop"])),id:a},"حذف",8,["id"]),Object(n["createVNode"])("div",{class:"name",id:a},Object(n["toDisplayString"])(o.name),9,["id"]),Object(n["createVNode"])("div",{class:"description",id:a},Object(n["toDisplayString"])(o.description),9,["id"])],8,["id"])})),128))])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",H,[z]))],64)})),G=(o("4de4"),{class:"dialogModal"}),X=Object(n["createTextVNode"])("جزئیات تسک"),Z={class:"createBoard"},K={key:0,class:"validationmessage"};function Q(e,t,o,a,r,c){var i=Object(n["resolveComponent"])("Toast"),s=Object(n["resolveComponent"])("InputText"),l=Object(n["resolveComponent"])("Textarea"),d=Object(n["resolveComponent"])("Button"),u=Object(n["resolveComponent"])("Dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",G,[Object(n["createVNode"])(u,{header:"Header",visible:e.display,"onUpdate:visible":t[3]||(t[3]=function(t){return e.display=t}),modal:!0,dismissableMask:!0,rtl:!0,closable:!0},{header:Object(n["withCtx"])((function(){return[X]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{position:"bottom-right"}),Object(n["createVNode"])("div",Z,[Object(n["createVNode"])(s,{type:"text",modelValue:e.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.name=t}),placeholder:"نام کارت"},null,8,["modelValue"]),e.missingname?(Object(n["openBlock"])(),Object(n["createBlock"])("label",K,Object(n["toDisplayString"])(e.validationmessage),1)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{modelValue:e.description,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.description=t}),autoResize:!0,rows:"5",cols:"30",placeholder:"توضیحات کارت"},null,8,["modelValue"]),Object(n["createVNode"])(d,{label:"ایجاد کارت",onClick:Object(n["withModifiers"])(e.createBoard,["stop"])},null,8,["onClick"])])]})),_:1},8,["visible"])])}var W=o("7aec"),Y=o.n(W),ee=o("a84a"),te=o.n(ee),oe=o("050f"),ne=o.n(oe),ae=o("6549"),re=o.n(ae),ce={name:"modal",methods:{open:function(){this.$emit("open")},close:function(){this.$emit("close")}}};ce.render=Q;var ie=o("6060"),se=o.n(ie),le=Object(n["defineComponent"])({name:"Boards",components:{InputText:te.a,Textarea:ne.a,Button:re.a,Dialog:Y.a,Toast:se.a},data:function(){var e=this;return{boards:[],name:"",missingname:!1,validationmessage:"",display:!1,description:"",isModalVisible:!1,items:[{label:"ویرایش",icon:"pi pi-fw pi-pencil"},{label:"حذف",icon:"pi pi-fw pi-trash",command:function(t){e.display=!e.display;var o=t.originalEvent;console.log(o)}}]}},watch:{items:{handler:function(){console.log("caught!")},deep:!0},name:function(){""===this.name?(this.missingname=!0,this.validationmessage="نام بورد را وارد کنید"):(this.missingname=!1,this.validationmessage="")}},mounted:function(){var e=this;setInterval(y,3e5),w("/v1/board").then((function(t){if("access token is required"===t.error)try{N("/v1/auth/refresh-token",{refresh_token:localStorage.getItem("refresh_token")}).then((function(t){t.refresh_token&&localStorage.setItem("refresh_token",t.refresh_token),e.$router.push("/login")}))}catch(o){e.$router.push("/login")}e.boards=t}))},beforeCreate:function(){document.body.className="boards"},methods:{addMessages:function(){this.messages=[{severity:"warn",content:"نام بورد را وارد کند",life:5e3}]},openboard:function(e){var t=this.boards[e.target.id]._id;console.log(e.target.id),this.$router.push("/board/"+t)},showModal:function(){this.isModalVisible=!0},openModal:function(){this.display=!0},closeModal:function(){this.display=!1},toggle:function(e){this.$refs.menu.toggle(e)},createBoard:function(e){var t=this;""!==this.name?(N("/v1/board",{name:this.name,description:this.description,type:"private"}).then((function(e){"failure"===e.status&&console.error(e.error),t.display=!1,w("/v1/board").then((function(e){if("access token is required"===e.error)try{N("/v1/auth/refresh-token",{refresh_token:localStorage.getItem("refresh_token")}).then((function(e){e.refresh_token&&localStorage.setItem("refresh_token",e.refresh_token),t.$router.push("/login")}))}catch(o){t.$router.push("/login")}t.boards=e}))})),console.log(this.name+this.description)):this.$toast.add({severity:"error",summary:"خطا",detail:"نام بورد را وارد کنید!",life:3e3,baseZIndex:2})},deleteboard:function(e){var t=this,o=this.boards[e.target.id]._id;B("/v1/board",{id:o}).then((function(e){e.deletedCount&&(t.boards=t.boards.filter((function(e){return e.id!==o})),w("/v1/board").then((function(e){if("access token is required"===e.error)try{N("/v1/auth/refresh-token",{refresh_token:localStorage.getItem("refresh_token")}).then((function(e){e.refresh_token&&localStorage.setItem("refresh_token",e.refresh_token),t.$router.push("/login")}))}catch(o){t.$router.push("/login")}t.boards=e})))}))},editboard:function(e){console.log(e.currenttarget)}}});o("6e3c");le.render=J,le.__scopeId="data-v-0500fea6";var de=le,ue=Object(n["withScopeId"])("data-v-2914d700");Object(n["pushScopeId"])("data-v-2914d700");var be={class:"header"},pe={key:0,class:"boardmembers"},me={key:0},fe={key:1},he={class:"dialogModal"},Oe=Object(n["createTextVNode"])("ایجاد کارت جدید"),je={class:"createBoardc"},ge={key:0,class:"validationmessage"},ve={class:"dialogModal"},ke=Object(n["createTextVNode"])("ایجاد لیست جدید"),Ve={class:"createBoard"},ye={key:0,class:"validationmessage"},Ne={class:"slider"},we={class:"slides"},Be={key:0,class:"newList"},_e={class:"listname"},Ce=Object(n["createTextVNode"])("ایجاد کارت جدید "),Se=Object(n["createVNode"])("b",null,"+",-1),Ie={class:"pagination"};Object(n["popScopeId"])();var xe=ue((function(e,t,o,a,r,c){var i=Object(n["resolveComponent"])("InputText"),s=Object(n["resolveComponent"])("Textarea"),l=Object(n["resolveComponent"])("Button"),d=Object(n["resolveComponent"])("Dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",be,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.board.name)+" ",1),Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(e.board.description),1),e.gotdata?(Object(n["openBlock"])(),Object(n["createBlock"])("div",pe,[e.board.members.lenght>1?(Object(n["openBlock"])(),Object(n["createBlock"])("p",me,"شما و "+Object(n["toDisplayString"])(e.board.members.length)+" نفر دیگر در این بورد مشترک هستید",1)):(Object(n["openBlock"])(),Object(n["createBlock"])("p",fe,"شما تنها عضو این بورد هستید"))])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",he,[Object(n["createVNode"])(d,{header:"Header",visible:e.modalAdd,"onUpdate:visible":t[3]||(t[3]=function(t){return e.modalAdd=t}),modal:!0,dismissableMask:!0,rtl:!0,closable:!0},{header:ue((function(){return[Oe]})),default:ue((function(){return[Object(n["createVNode"])("div",je,[Object(n["createVNode"])(i,{type:"text",modelValue:e.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.name=t}),placeholder:"نام کارت"},null,8,["modelValue"]),e.missingname?(Object(n["openBlock"])(),Object(n["createBlock"])("label",ge,Object(n["toDisplayString"])(e.validationmessage),1)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{modelValue:e.description,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.description=t}),autoResize:!0,rows:"5",cols:"30",placeholder:"توضیحات کارت"},null,8,["modelValue"]),Object(n["createVNode"])(l,{label:"ایجاد کارت",onClick:Object(n["withModifiers"])(e.createBoard,["stop"])},null,8,["onClick"])])]})),_:1},8,["visible"])]),Object(n["createVNode"])("div",ve,[Object(n["createVNode"])(d,{header:"Header",visible:e.modalAddList,"onUpdate:visible":t[6]||(t[6]=function(t){return e.modalAddList=t}),modal:!0,dismissableMask:!0,rtl:!0,closable:!0},{header:ue((function(){return[ke]})),default:ue((function(){return[Object(n["createVNode"])("div",Ve,[Object(n["createVNode"])(i,{type:"text",modelValue:e.listname,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.listname=t}),placeholder:"نام لیست"},null,8,["modelValue"]),e.missingname?(Object(n["openBlock"])(),Object(n["createBlock"])("label",ye,Object(n["toDisplayString"])(e.validationmessage),1)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{modelValue:e.listdesc,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.listdesc=t}),autoResize:!0,rows:"5",cols:"30",placeholder:"توضیحات لیست"},null,8,["modelValue"]),Object(n["createVNode"])(l,{label:"ایجاد لیست",onClick:Object(n["withModifiers"])(e.createNewList,["stop"])},null,8,["onClick"])])]})),_:1},8,["visible"])])]),Object(n["createVNode"])("div",Ne,[Object(n["createVNode"])("div",we,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.lists,(function(o,a){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"slide",key:o._id,id:a,ref:a},[o._id?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("div",Be,[Object(n["createVNode"])("button",{class:"createList",onClick:t[7]||(t[7]=Object(n["withModifiers"])((function(){return e.createList.apply(e,arguments)}),["stop"]))},"ایجاد لیست جدید")])),Object(n["createVNode"])("p",_e,Object(n["toDisplayString"])(o.name),1),Object(n["createVNode"])("div",{class:"todos",value:o._id},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(o.tasks,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("p",{key:t._id,onClick:Object(n["withModifiers"])((function(o){return e.openEdit(t)}),["stop"])},Object(n["toDisplayString"])(t.name),9,["onClick"])})),128))],8,["value"]),o._id?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,class:"addTask",onClick:t[8]||(t[8]=function(){return e.openAdd.apply(e,arguments)}),id:o._id},[Ce,Se],8,["id"])):Object(n["createCommentVNode"])("",!0)],8,["id"])})),128))])]),Object(n["createVNode"])("div",Ie,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.lists,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])("a",{key:e._id,href:"#"+t},null,8,["href"])})),128))])],64)})),Te=Object(n["defineComponent"])({name:"Board",components:{Dialog:Y.a,InputText:te.a,Textarea:ne.a,Button:re.a},data:function(){return{lists:null,modalAdd:!1,modalEdit:!1,board:{_id:""},gotdata:!1,activeSlide:0,name:"",description:"",listId:"",listname:"",listdesc:"",boardid:"",modalAddList:!1}},watch:{list:{handler:function(){console.log(this.lists)}},modalAdd:{handler:function(){this.modalAdd||(this.listId="")}}},methods:{openAdd:function(e){this.modalAdd=!0,this.listId=e.currentTarget.id},openEdit:function(e){console.log(e._id)},closeAdd:function(){this.modalAdd=!1,this.name="",this.description=""},closeEdit:function(){this.modalEdit=!1},createList:function(){this.modalAddList=!0},createNewList:function(){var e=this;this.board&&(console.log(this.board._id),N("/v1/list",{name:this.listname,board_id:this.board._id}).then((function(t){1===t.insertedCount&&(e.getlisttasks(),e.modalAddList=!1)})))},getlisttasks:function(){var e=this;w("/v1/board/".concat(this.$route.params.id,"/lists")).then((function(t){if("access token is required"===t.error)try{N("/v1/auth/refresh-token",{refresh_token:localStorage.getItem("refresh_token")}).then((function(t){t.refresh_token&&localStorage.setItem("refresh_token",t.refresh_token),e.$router.push("/login")}))}catch(o){console.log(o),e.$router.push("/login")}t.push({test:"wow"}),e.lists=t}))},createBoard:function(e){var t=this;N("/v1/task",{name:this.name,desc:this.description,idList:this.listId}).then((function(e){console.log(e),t.getlisttasks(),t.modalAdd=!1})),console.log(this.listId)}},beforeCreate:function(){document.body.className="board"},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return setInterval(y,3e5),t.next=3,w("/v1/board/".concat(e.$route.params.id)).then((function(t){"failure"===t.status&&console.error(t.error),console.log(t),e.board=t}));case 3:return t.next=5,w("/v1/board/".concat(e.$route.params.id,"/lists")).then((function(t){if("access token is required"===t.error)try{N("/v1/auth/refresh-token",{refresh_token:localStorage.getItem("refresh_token")}).then((function(t){t.refresh_token&&localStorage.setItem("refresh_token",t.refresh_token),e.$router.push("/login")}))}catch(o){console.log(o),e.$router.push("/login")}t.push({test:"wow"}),e.lists=t}));case 5:e.gotdata=!0;case 6:case"end":return t.stop()}}),t)})))()}});o("7e9b");Te.render=xe,Te.__scopeId="data-v-2914d700";var Me=Te,De=[{path:"/",name:"Boards",component:de},{path:"/board/:id",name:"Board",props:!0,component:Me},{path:"/login",name:"Login",component:A},{path:"/register",name:"Register",component:A}],Le=Object(i["a"])({history:Object(i["b"])(""),routes:De});Le.beforeEach((function(e,t,o){if("Login"!==e.name&&"Register"!==e.name){var n=localStorage.getItem("access_token");n?o():o("/login")}else o()}));var $e=Le,Ae=(o("8e1f"),o("2d62"),o("e1ae"),o("ecee")),Ue=o("c074"),Re=o("ad3d"),Ee=o("8459"),Pe=o.n(Ee),qe=Object(n["createApp"])(c);qe.use($e),qe.use(Pe.a),Ae["c"].add(Ue["b"]),Ae["c"].add(Ue["a"]),qe.component("font-awesome-icon",Re["a"]),qe.directive("autofocus",{mounted:function(e){e.focus()}}),qe.mount("#app")},cf05:function(e,t,o){e.exports=o.p+"img/logo.82b9c7a5.png"},d982:function(e,t,o){},da0b:function(e,t,o){}});
//# sourceMappingURL=app.d46c17d3.js.map